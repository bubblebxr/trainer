<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.example.se_project.mapper.IHotelMapper">
    <select id="searchHotel">
        SELECT * FROM hotels
<<<<<<< Updated upstream
        WHERE hid=#{id}
=======
        WHERE id=#{id}
>>>>>>> Stashed changes
    </select>
    <select id="searchComment">
        select * from comments
        where hotel_id=#{id}
    </select>
    <select id="searchRoom">
        select * from rooms
        where hotel_id=#{id}
        and date >= #{arrive_date}
        and date &lt; #{ldeparture_date}
    </select>
    <select id="searchAvailableHotel" resultType="java.lang.Integer">
        SELECT hotel_id
        FROM (SELECT hotel_id,
                     date,
                     MAX(num) AS max_available
              FROM rooms
              WHERE city = #{city}
                AND date >= #{arrive_date}
                AND date &lt; #{ldeparture_date}
              GROUP BY hotel_id, date) AS available_rooms_per_day
        GROUP BY hotel_id
        HAVING MIN(max_available) > 0;
    </select>
    <update id="updatemin">
        update hotels
        set miniprice=#{miniprice}
        where hid=#{id}
    </update>

    <select id="getPlaces">
        select distinct city from hotels
    </select>
    <update id="updateRoomNum">

    </update>

</mapper>